---
title: 【区块链】如何解决拜占庭将军问题
date: 2018-03-03 14:17:06
tags:
- BlockChain
- Theory
- BGP
categories:
- BlockChain
---

【阅读时间】5min 1051 words
【阅读内容】什么是拜占庭问题，以及它和区块链的关系

<!-- more -->

首先，这个问题属于**计算机科学领域**。解决这个问题才是区块链最大的价值所在，因为这个问题一直是**分布式系统**的重要难题之一

# 什么是拜占庭将军问题

这个问题的定义者是**图灵奖**获得者，Lamport大神，分布式系统的关键性奠基人之一，有面包店算法，拜占庭将军问题，Paxos算法等著名成果

## 问题描述

<div align="center"><img src="【区块链】如何解决拜占庭将军问题/BG1.png" alt="" width="500"></div>

`9个将军`带领`9支军队`，打一场攻城战役。假设每个将军都能**独立**根据眼前战况做出两种判断：**进攻**或**撤退**，要求（或者最终目的是）如何让这9个将军的**命令**是**一致的**（一致性，即共识）？要么一起进攻，要么一起撤退（每个将军之间也是互不信任的，也有消灭对方的动机）

最简单的策略即：**投票**（上图中的红色箭头和绿色箭头为每个将军做出的判断），**超过半数支持**某个决定，那么**所有9个将军**一定执行**这个决定**。如上图，5个将军决定进攻，4个将军决定撤退，那么所有将军都会下令：进攻！

这种策略需要每个将军把**自己的判断**通过一种途径（途中灰色箭头）传递到所有其他将军处。相对的，每个将军只有在收到了所有投票结果后，才会下令。如上面的例子，所有将军得到投票：**4进攻5撤退**，才下令**撤退**

<div align="center"><img src="【区块链】如何解决拜占庭将军问题/BGP.png" alt="" width="500">

这个**投票策略**的最大问题：假设出现了**叛徒**，如上图所示，会出现两种情况

- 【1】对自己位置的战场情况进行错误广播（比如他这个地方优势很大，但是投票给撤退）
- 【2】可以选择靠给不同的将军送去不同的消息**破坏整体决定的一致性**（导致左边四个将军选择撤退，右边四个将军选择进攻）

## 问题总结

此时总结一下，拜占庭问题的问题倒是是什么：

- 所有将军**如何**才能**达成共识**去攻打（或撤退）城堡

根据相关的研究，得出一个【一般性的结论】：**如果叛徒的数量大于或等于三分之一 ，那么拜占庭问题不可解**，这个三分之一也被称为**拜占庭容错**，三模冗余是完全无法容错的（也就是说无解，不可能保持一致性）

解释方法使用**副官模型**即可

推广到计算机系统内，【将军】类比为【计算机】，而计算机因为物理或被感染等其他原因造成的【运行异常】就是【叛徒】，其实整个问题也是为了保证分布式系统的**一致性**和**可用性**

# 传统解决方案

在区块链之前，有两种解决方案：口头协议（又称为拜占庭容错算法）和书面协议，在这里就不赘述

通常来说，大多数分布式系统使用的是书面协议确保一致性，中心机构背书

# 区块链解决方案

我们知道，区块链最强的地方就在于它的一致性（了解区块链原理，可移步另一篇博客 [一文看懂区块链：一步一步发明比特币](https://charlesliuyx.github.io/2017/09/24/%E4%B8%80%E6%96%87%E5%BC%84%E6%87%82%E5%8C%BA%E5%9D%97%E9%93%BE-%E4%BB%A5%E6%AF%94%E7%89%B9%E5%B8%81%E4%B8%BA%E4%BE%8B/)），同意这正是拜占庭问题的核心

互联网技术的存在，让传输过程中，基本没有延迟（或说延迟很小可以基本忽略），**解决了通讯延迟的问题**

区块链使用**链型数据结构** + **算力互相制约**使得**作假的成本**随着时间的加长**呈指数上升**，**解决了一致性问题**。当然非对称秘钥部分的密码学，解决了**身份确认问题**

至少这个系统解决的问题不仅仅是金融领域，去中心化银行系统的问题所在，交易，其实只是其中很小的一部分

【完】







