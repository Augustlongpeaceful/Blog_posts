---
title: 【直观算法】Egg Puzzle 鸡蛋难题
date: 2018-10-11 22:39:43
tags: 
- DP
- Optimization
categories:
- Algorithm
---

【阅读时间】5 - 10 min
【阅读内容】Google面试题：100层楼，两个鸡蛋**最少用多少次**能测出鸡蛋的**会在哪一层碎**

<!-- more -->

# 题目描述

有一栋楼共`100层`，一个鸡蛋从`第N层`及以上的楼层落下来会摔破， 在`第N层`以下的楼层落下不会摔破。给你2个鸡蛋，设计方案找出`N`，并且保证在最坏情况下， **最小化鸡蛋下落的次数**

有些时候仍的东西可能会变化，比如变成**瓶子**

这道题目的整个解答过程设计到了几乎所有的逻辑思维，工程思维，当真是一道海纳百川的面试题

## 求什么？

利用`抽象思维`，**符号化**题目描述

⭐️〔题目要求〕找到 $x$ 层落下不会碎，$x+1$ 层落下会碎的**临界层**所需要的最少尝试次数 $M$ (for minimum)

# 解题思路

使用`等价思维`，如何计算出最小的尝试次数？换言之，就是**如何计算出这个结果**，找出公式 $M = f()$

## 一个鸡蛋

假设最后的结果是 $m$ 次，使用`归纳思维`，先看只拥有`1`个鸡蛋的情况，思考什么是`最坏情况`。你可能说可以使用二分法，但是请注意，你只有`1`个鸡蛋，又必须能找到**临界层**。所以，`1`个鸡蛋的情况下，最坏情况为 $m = 100$ 

但这么思考**还不够究竟**，缺乏`抽象思维`。通过逻辑思考，可以得出 $m =100$ 的答案，但没有一个抽象的公式化结论？或者说，如何使用一个公式算出 $m$ ？接下来就来解决这个问题

假设**临界层**分别为 $x = 1,2,3 \dots 100$ ，因为你只有`1`个鸡蛋，所以唯一**可选策略**就是从`1`层开始**一层一层**尝试，对应的每个策略选择最坏情况的**尝试步数**（比如 $x = 95$ ，从`1`层开始尝试为`95`次）那么可以得到对应的 $m = 1,2,3 \dots 99,100$

所以可抽象化得到我们**待求的符号表达式** 
$$
M = \max_{1 \leqslant x \leqslant N}(\forall S_i(x))
$$
公式的语言型描述是：对于每一个可能的**临界层** $x$，可以得到使用可选择策略 $S_i()$ 需要的**尝试步数**。在这些每一个可能，选出其中的最大值（即最坏情况），为最终答案

这个思维模式对于接着道题目非常关键，无论**临界层** $x$ 在哪一层，**只有一个鸡蛋的情况下**，总是需要考虑**最坏情况**

> 这道题目，对`1`个鸡蛋问题的深刻理解异常重要。只有深刻理解基石逻辑才能更好的解决问题。这道题只要能划归到处理`1`个鸡蛋的**子问题**就会变得非常简单

## 两个鸡蛋

依据`粗条细调思维`，我们有一次试错的机会。那么可以思考，假设第一个鸡蛋在 $k$ 层`碎了`，意味着什么？意味着，待求的**临界层** $x$ 一定满足 $1 \leqslant x \lt k$ ，或者记为 $[1,k)$ ，就把待求量限制到了一个更小的范围内，明显可以提高找到目标值的效率

我们已经知道要用第一个鸡蛋做**粗调**，在`碎了`后，时候获得的结论使用第二个鸡蛋，参照`1`个鸡蛋的原则进行**细调**。说明了这种思考模式后，下一步，问题就变成了一个策略问题，即**第一个鸡蛋应该在哪些层数仍**的问题

在一层楼，丢了一个鸡蛋，除了`碎了`这个结果，还有另一种可能性，即`没碎`。这句话是一个**极为关键的信号**，背后在告诉我们这是一个**树形结构**问题，下面就把这条树形结构链分析出来

> **将数据结构与问题描述的勾连能力**是衡量算法能力的重要指标
>
> 总结来说：没有分叉，一路推理，为〔线性结构〕；看到决策结果**有分叉**，用〔树形结构〕；若在推理过程中，产生了**交汇**，则用〔图结构〕

假设第一个鸡蛋的楼层策略是 $k_1, k_2,\cdots,k_p$ ，其中 $p$ 是仍的次数，比如如果你选择在 $20,40,60,80$ 层仍，那么 $p=4$ ，根据题意，满足 $1 \lt k_1 \lt k_2 \lt \cdots \lt k_{p-1} \lt k_p \lt 100$ ，那么我们画出树形示意图，如下图所示

<div align="center"><img src="【直观算法】Egg Puzzle 鸡蛋难题/Tree.png" alt="" width="700"></div>

解释一下这棵树。在每一层扔下一个鸡蛋的时候，都有两种可能，`碎了`和`没碎`，分别对应了两个分支。一旦`碎了`，那么就使用`1`个鸡蛋的问题思路来解题，直到找到**临界层**。在 $k\_1$层没碎，那么需要在 $k\_2$层继续尝试，直到 $N$ 层最后找到**临界层**





# 工程思维

## 抽象思维

## 等价思维

**沟通的效率和信息的冗余度成正比**，所以一个人能否把同一个概念，**从不同的角度，用不同的案例类比，抑或各类精彩直观的比喻**表达出来，这个能力很重要，它可以让人们更加**准确快速的**理解你想表达的意思

**学习的真正本质**：**是在一个领域内不断的去建立这种沟通共识的框架**。举个例子，学过线性代数的人，只要**提到矩阵，就能想到变换**。这就是都学过线性代数的人交流密码，如矩阵的逆 = 一个具体的反向变换。没学过这门课的人是无法和**学过的人**进行沟通的。这也从很大程度加强了人们沟通的效率，所以，**学习带来的终极成效**其实是降低了**人类社会的沟通时间，提高了效率**

再举个例子：机器学习中，提到**正则化**，必须建立一套与之相关的知识架构，包括，**过拟合，最优化函数曲面空间理解，范数**等，成**树状结构**继续推而广之，这每一个名词，背后也对应了一个**更加直观，更加易懂的描述方式**。但是我们需要知道，如果我为了表达正则化，为了让你明白我的意思，我需要用一大堆描述性语言，那我们两人的**沟通效率就十分低下了**

这也就是知识体系，一门学科，一门专业的最终含义，学习是为了**构建这门学科的通识沟通框架**，降低同行之间的沟通成本。当然，这有一个**必要前提**，把**学习的目的**理解降**低沟通成本**必须是你做的工作**是规模化的**，涉及**协作**。如果你是爱因斯坦，是开拓学科的那类0级工程师（来自于吴军老师谷歌方法论）。独自想象钻研，那么，学习的本质可能在于给你更多的角度（认知能力），更多的工具（锤子锯子）去更好的**探索这个世界的本质和规则**，在这样的条件下，关于学习的本质的描述就需要调整了

## 反推思维

## 归纳思维

## 粗条细调思维

对于这道题目，首先考察的是程序员的粗条细调思维。考虑中经常有对精读的需求，那么是如何做的？比如常见的千分尺，首先是一个横向的卡尺来接近目标值，然后用一个滚轮形的第二级继续细调。同样，显微镜也有对应的调整方法。都可以总结为`粗条细调思维`

首先大步接近最优解，再调整迭代速度，更加细微的接近最优解。机器学习中的，Adam优化器也是用的类似的思维来设计的

# 代码实现

